Maintainer:     Ryan Young
Last Modified:  Nov 29, 2021

" How most plugins handle it:
function! s:My_Function()
    try
        " commands here
    catch /^Vim\%((\a\+)\)\=:/
        echohl ErrorMsg
        echomsg substitute(v:exception, '^\CVim\%((\a\+)\)\=:', '', '')
        echohl None
    endtry
endfunction

" Better alternative
function! s:My_Function()
    try
        " commands here
        return 1    " Success
    catch /^Vim\%((\a\+)\)\=:/
        call ingo#err#SetVimException()
        return 0    " Failure, use stored error message.
    endif
endfunction

if ! <SID>My_Function() | echoerr ingo#err#Get() | endif
